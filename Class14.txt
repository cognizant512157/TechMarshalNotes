14th Class (Dt: 10 June 2019)
-----------------------------
Today topic is Docker container

CE -> Community Edition
EE -> Enterprise Edition

EE for Linux
Follow the steps with subscription

2nd AMI machine in AWs which contains docker in it.

yum install docker -y

ducker hub (https://hub.docker.com/)
Its a repository, Many developer develop images and publish in it.


docker images list the docker images under the base server(AWS AMI2)
[root@ip-172-31-3-66 ~]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE

To list the running container: 
[root@ip-172-31-3-66 ~]# docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES


To list all the container(running and stopped one) 
[root@ip-172-31-3-66 ~]# docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES



$ docker pull image_name
This command is going to download the image file into ur local base system.

[root@ip-172-31-3-66 ~]# docker pull httpd
Using default tag: latest
latest: Pulling from library/httpd
743f2d6c1f65: Pull complete
c92eb69846a6: Pull complete
2211b052800a: Pull complete
a8f7283e297c: Pull complete
a72363db8c78: Pull complete
Digest: sha256:6eceaadeab70e6355edb3fef41b8c0b34cafd9b00a17252c875530dcc2d98522
Status: Downloaded newer image for httpd:latest
[root@ip-172-31-3-66 ~]#



[root@ip-172-31-3-66 ~]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
httpd               latest              3bd2a941224f        4 days ago          140MB


This cmd will create a container. 
It will first search in the local repo and if it's not there then search in dockerHub.
docker run image_name

Ex: docker run httpd

It will run in interactive mode. 
Which is internally "docker run -i -t httpd"

docker run -d image_file  # -d is for detach

[root@ip-172-31-3-66 ~]# docker run -d httpd
2d893d050c4eaacc1d81400f703440324ee0237f539ce6915b3e212596309dbc
[root@ip-172-31-3-66 ~]#



[root@ip-172-31-3-66 ~]# docker ps
CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS               NAMES
2d893d050c4e        httpd               "httpd-foreground"   34 seconds ago      Up 33 seconds       80/tcp     compassionate_brahmagupta


The container id is "2d893d050c4e" which is first 12 char from "2d893d050c4eaacc1d81400f703440324ee0237f539ce6915b3e212596309dbc"


[root@ip-172-31-3-66 ~]# docker ps -a
CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS                     PORTS               NAMES
2d893d050c4e        httpd               "httpd-foreground"   4 minutes ago       Up 4 minutes               80/tcp              compassionate_brahmagupta
a3088102851a        httpd               "httpd-foreground"   9 minutes ago       Exited (0) 7 minutes ago                       angry_khorana


Q. What is the diff bet ps and ps -a

To remove a container.

[root@ip-172-31-3-66 ~]# docker rm -f 2d893d050c4e a3088102851a
2d893d050c4e
a3088102851a


How to assign a name 
[root@ip-172-31-3-66 ~]# docker run --name myFirstCont -d httpd

Note: Always the last word in the command is docker image file name.


[root@ip-172-31-3-66 ~]# docker ps
CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS               NAMES
fc82794c6cd2        httpd               "httpd-foreground"   5 seconds ago       Up 5 seconds        80/tcp              myFirstCont


